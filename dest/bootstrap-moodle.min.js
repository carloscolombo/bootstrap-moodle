"use strict";var Moodle=function(){function a(){var a=g.params.loadOptions.url||$(g.params.selector).attr("href");return g.$modal.find(".modal-body").html(g.params.modal.loadingText),g.$modal.modal(g.params.modal.bootstrapOptions),null==a?void console.warn("Cannot load. Url is not specified."):(g.params.loadOptions.url=a,g.params.loadOptions.success=function(a,b,c){var d=c.getResponseHeader("content-type");g.$modal.find(".modal-body").empty(),d.indexOf("html")>-1&&g.$modal.find(".modal-body").html(a),g.$modal.trigger("modal-loaded",a)},void $.ajax(g.params.loadOptions))}function b(){null!=g.params.selector&&$(g.params.selector).click(function(a){a.preventDefault(),g.show()})}function c(){g.$modal=$(e),g.params.modal.buttons instanceof Array&&g.params.modal.buttons.length>0&&d(g.params.modal.buttons),$("body").append(g.$modal)}function d(a){for(var b=0==g.$modal.find(".modal-footer").length?$('<div class="modal-footer"></div>'):g.$modal.find(".modal-footer"),c=0;c<a.length;c++){var d=a[c],e=$("<button>",{"class":"btn "+f[d.type]}).html(d.content);if(null!=d.attr)for(var h in d.attr)e.attr(h,d.attr[h]);b.append(e),e.on("click",function(a){for(var b=0;b<g.params.modal.buttons.length;b++)g.params.modal.buttons[b].$button.is($(a.target))&&g.params.modal.buttons[b].action(a,g)}),d.$button=e,g.$modal.find(".modal-content").append(b)}}var e='<div class="modal fade"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title"></h4></div><div class="modal-body"></div></div></div></div>',f={"default":"btn-default",success:"btn-success",warning:"btn-warning",danger:"btn-danger",info:"btn-info"},g={defaults:{selector:null,modal:{title:"Modal Title",content:"<p>One fine body...</p>",loadingText:'<div class="text-center">Loading...</div>',bootstrapOptions:{},buttons:[{type:"default",css:null,action:function(a,b){b.hide()},content:"Close",attr:{type:"button",id:"close-modal"}}]},loadOptions:{url:null}},init:function(a){null!=a&&null!=a.loadOptions&&(a.loadOptions=$.extend({},this.defaults.loadOptions,a.loadOptions)),null!=a&&null!=a.modal&&(a.modal=$.extend({},this.defaults.modal,a.modal)),this.params=$.extend({},this.defaults,a),c(),b()},show:function(){this.$modal.find(".modal-title").html(this.params.modal.title),null==this.params.selector||null==$(this.params.selector).attr("href")&&null==this.params.loadOptions.url?(this.$modal.find(".modal-body").html(this.params.modal.content),this.$modal.modal(this.params.modal.bootstrapOptions)):a()},hide:function(){this.$modal.modal("hide")},addButtons:function(a){null!=a&&a instanceof Array||console.warn("Cannot append buttons. Please view documentation for 'addButtons'."),this.params.modal.buttons=this.params.modal.buttons.concat(a),d(a)},removeButtons:function(a){for(var b=this,c=b.params.modal.buttons,d=0;d<a.length;d++){var e=a[d];e.$button.remove(),c.splice(c.indexOf(e),1)}0==c.length&&b.removeAllButtons()},removeAllButtons:function(){this.params.modal.buttons=[],$(".modal-footer").remove()}};return g};Moodle.create=function(a){var b=Moodle();return b.init(a),b};